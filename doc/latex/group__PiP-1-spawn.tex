\hypertarget{group__PiP-1-spawn}{\section{Spawning Pi\-P task}
\label{group__PiP-1-spawn}\index{Spawning Pi\-P task@{Spawning Pi\-P task}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}{pip\-\_\-spawn\-\_\-from\-\_\-main} (pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, char $\ast$prog, char $\ast$$\ast$argv, char $\ast$$\ast$envv, void $\ast$exp, void $\ast$aux)
\begin{DoxyCompactList}\small\item\em Setting information to invoke a Pi\-P task starting from the main function. \end{DoxyCompactList}\item 
void \hyperlink{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}{pip\-\_\-spawn\-\_\-from\-\_\-func} (pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, char $\ast$prog, char $\ast$funcname, void $\ast$arg, char $\ast$$\ast$envv, void $\ast$exp, void $\ast$aux)
\begin{DoxyCompactList}\small\item\em Setting information to invoke a Pi\-P task starting from a function defined in a program. \end{DoxyCompactList}\item 
void \hyperlink{group__PiP-1-spawn_ga1c3f1d9e029f68dbcfb7d78b7dfa1533}{pip\-\_\-spawn\-\_\-hook} (pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$hook, pip\-\_\-spawnhook\-\_\-t before, pip\-\_\-spawnhook\-\_\-t after, void $\ast$hookarg)
\begin{DoxyCompactList}\small\item\em Setting invocation hook information. \end{DoxyCompactList}\item 
int \hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} (pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, uint32\-\_\-t coreno, uint32\-\_\-t opts, int $\ast$pipidp, pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$hookp)
\begin{DoxyCompactList}\small\item\em Spawning a Pi\-P task. \end{DoxyCompactList}\item 
int \hyperlink{group__PiP-1-spawn_ga4698d85283b03f0443fb0991e1119d35}{pip\-\_\-spawn} (char $\ast$filename, char $\ast$$\ast$argv, char $\ast$$\ast$envv, uint32\-\_\-t coreno, int $\ast$pipidp, pip\-\_\-spawnhook\-\_\-t before, pip\-\_\-spawnhook\-\_\-t after, void $\ast$hookarg)
\begin{DoxyCompactList}\small\item\em spawn a Pi\-P task (Pi\-P v1 A\-P\-I and deprecated) \end{DoxyCompactList}\item 
int \hyperlink{group__PiP-1-spawn_ga8b31bc23b6e165ae50d3bdea655539c5}{pip\-\_\-blt\-\_\-spawn} (pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, uint32\-\_\-t coreno, uint32\-\_\-t opts, int $\ast$pipidp, pip\-\_\-task\-\_\-t $\ast$$\ast$bltp, pip\-\_\-task\-\_\-queue\-\_\-t $\ast$queue, pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$hookp)
\begin{DoxyCompactList}\small\item\em spawn a Pi\-P B\-L\-T/\-U\-L\-P (Bi-\/\-Level Task / User-\/\-Level Process) \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\hypertarget{pip-spawn}{}\subsubsection{Pi\-P Spawnig Pi\-P (\-U\-L\-P/\-B\-L\-T) task}\label{pip-spawn}
\begin{DoxyParagraph}{Description}
Spawning Pi\-P task or U\-L\-P/\-B\-L\-T task 
\end{DoxyParagraph}


\subsection{Function Documentation}
\hypertarget{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}{\index{Spawning Pi\-P task@{Spawning Pi\-P task}!pip\-\_\-spawn\-\_\-from\-\_\-main@{pip\-\_\-spawn\-\_\-from\-\_\-main}}
\index{pip\-\_\-spawn\-\_\-from\-\_\-main@{pip\-\_\-spawn\-\_\-from\-\_\-main}!Spawning PiP task@{Spawning Pi\-P task}}
\subsubsection[{pip\-\_\-spawn\-\_\-from\-\_\-main}]{\setlength{\rightskip}{0pt plus 5cm}void pip\-\_\-spawn\-\_\-from\-\_\-main (
\begin{DoxyParamCaption}
\item[{pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$}]{progp, }
\item[{char $\ast$}]{prog, }
\item[{char $\ast$$\ast$}]{argv, }
\item[{char $\ast$$\ast$}]{envv, }
\item[{void $\ast$}]{exp, }
\item[{void $\ast$}]{aux}
\end{DoxyParamCaption}
)}}\label{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}
\begin{DoxyParagraph}{Name}
pip\-\_\-spawn\-\_\-from\-\_\-main\index{pip_spawn_from_main@{pip\-\_\-spawn\-\_\-from\-\_\-main}}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Synopsis}
\#include $<$\hyperlink{pip_8h_source}{pip.\-h}$>$ \par
void pip\-\_\-spawn\-\_\-from\-\_\-main( pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, char $\ast$prog, char $\ast$$\ast$argv, char $\ast$$\ast$envv, void $\ast$exp, void $\ast$aux )
\end{DoxyParagraph}
\begin{DoxyParagraph}{Description}
This function sets up the {\ttfamily pip\-\_\-spawn\-\_\-program\-\_\-t} structure for spawning a Pi\-P task, starting from the mmain function.
\end{DoxyParagraph}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em progp} & Pointer to the {\ttfamily pip\-\_\-spawn\-\_\-program\-\_\-t} structure in which the program invokation information will be set \\
\hline
\mbox{\tt in}  & {\em prog} & Path to the executiable file. \\
\hline
\mbox{\tt in}  & {\em argv} & Argument vector. \\
\hline
\mbox{\tt in}  & {\em envv} & Environment variables. If this is {\ttfamily N\-U\-L\-L}, then the {\ttfamily environ} variable is used for the spawning Pi\-P task. \\
\hline
\mbox{\tt in}  & {\em exp} & Export value to the spawning Pi\-P task \\
\hline
\mbox{\tt in}  & {\em aux} & Auxiliary data to be associated with the created Pi\-P task\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}{pip\-\_\-spawn\-\_\-from\-\_\-func} 
\end{DoxySeeAlso}
\hypertarget{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}{\index{Spawning Pi\-P task@{Spawning Pi\-P task}!pip\-\_\-spawn\-\_\-from\-\_\-func@{pip\-\_\-spawn\-\_\-from\-\_\-func}}
\index{pip\-\_\-spawn\-\_\-from\-\_\-func@{pip\-\_\-spawn\-\_\-from\-\_\-func}!Spawning PiP task@{Spawning Pi\-P task}}
\subsubsection[{pip\-\_\-spawn\-\_\-from\-\_\-func}]{\setlength{\rightskip}{0pt plus 5cm}void pip\-\_\-spawn\-\_\-from\-\_\-func (
\begin{DoxyParamCaption}
\item[{pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$}]{progp, }
\item[{char $\ast$}]{prog, }
\item[{char $\ast$}]{funcname, }
\item[{void $\ast$}]{arg, }
\item[{char $\ast$$\ast$}]{envv, }
\item[{void $\ast$}]{exp, }
\item[{void $\ast$}]{aux}
\end{DoxyParamCaption}
)}}\label{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}
\begin{DoxyParagraph}{Name}
pip\-\_\-spawn\-\_\-from\-\_\-func\index{pip_spawn_from_func@{pip\-\_\-spawn\-\_\-from\-\_\-func}}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Synopsis}
\#include $<$\hyperlink{pip_8h_source}{pip.\-h}$>$ \par
pip\-\_\-spawn\-\_\-from\-\_\-func( pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, char $\ast$prog, char $\ast$funcname, void $\ast$arg, char $\ast$$\ast$envv, void $\ast$exp, void $\ast$aux );
\end{DoxyParagraph}
\begin{DoxyParagraph}{Description}
This function sets the required information to invoke a program, starting from the {\ttfamily main()} function. The function should have the function prototype as shown below; 
\begin{DoxyCode}
\textcolor{keywordtype}{int} start\_func( \textcolor{keywordtype}{void} *arg )
\end{DoxyCode}
 This start function must be globally defined in the program.. The returned integer of the start function will be treated in the same way as the {\ttfamily main} function. This implies that the {\ttfamily pip\-\_\-wait} function family called from the Pi\-P root can retrieve the return code.
\end{DoxyParagraph}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em progp} & Pointer to the {\ttfamily pip\-\_\-spawn\-\_\-program\-\_\-t} structure in which the program invokation information will be set \\
\hline
\mbox{\tt in}  & {\em prog} & Path to the executiable file. \\
\hline
\mbox{\tt in}  & {\em funcname} & Function name to be started \\
\hline
\mbox{\tt in}  & {\em arg} & Argument which will be passed to the start function \\
\hline
\mbox{\tt in}  & {\em envv} & Environment variables. If this is {\ttfamily N\-U\-L\-L}, then the {\ttfamily environ} variable is used for the spawning Pi\-P task. \\
\hline
\mbox{\tt in}  & {\em exp} & Export value to the spawning Pi\-P task \\
\hline
\mbox{\tt in}  & {\em aux} & Auxiliary data to be associated with the created Pi\-P task\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}{pip\-\_\-spawn\-\_\-from\-\_\-main} 
\end{DoxySeeAlso}
\hypertarget{group__PiP-1-spawn_ga1c3f1d9e029f68dbcfb7d78b7dfa1533}{\index{Spawning Pi\-P task@{Spawning Pi\-P task}!pip\-\_\-spawn\-\_\-hook@{pip\-\_\-spawn\-\_\-hook}}
\index{pip\-\_\-spawn\-\_\-hook@{pip\-\_\-spawn\-\_\-hook}!Spawning PiP task@{Spawning Pi\-P task}}
\subsubsection[{pip\-\_\-spawn\-\_\-hook}]{\setlength{\rightskip}{0pt plus 5cm}void pip\-\_\-spawn\-\_\-hook (
\begin{DoxyParamCaption}
\item[{pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$}]{hook, }
\item[{pip\-\_\-spawnhook\-\_\-t}]{before, }
\item[{pip\-\_\-spawnhook\-\_\-t}]{after, }
\item[{void $\ast$}]{hookarg}
\end{DoxyParamCaption}
)}}\label{group__PiP-1-spawn_ga1c3f1d9e029f68dbcfb7d78b7dfa1533}
\begin{DoxyParagraph}{Name}
pip\-\_\-spawn\-\_\-hook\index{pip_spawn_hook@{pip\-\_\-spawn\-\_\-hook}}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Synopsis}
\#include $<$\hyperlink{pip_8h_source}{pip.\-h}$>$ \par
void pip\-\_\-spawn\-\_\-hook( pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$hook, pip\-\_\-spawnhook\-\_\-t before, pip\-\_\-spawnhook\-\_\-t after, void $\ast$hookarg );
\end{DoxyParagraph}
\begin{DoxyParagraph}{Description}

\end{DoxyParagraph}
The {\itshape before} and {\itshape after} functions are introduced to follow the programming model of the {\ttfamily fork} and {\ttfamily exec}. {\itshape before} function does the prologue found between the {\ttfamily fork} and {\ttfamily exec}. {\itshape after} function is to free the argument if it is {\ttfamily malloc()ed}, for example. \begin{DoxyPrecond}{Precondition}
It should be noted that the {\itshape before} and {\itshape after} functions are called in the {\itshape context} of Pi\-P root, although they are running as a part of Pi\-P task (i.\-e., having P\-I\-D of the spawning Pi\-P task). Conversely speaking, those functions cannot access the variables defined in the spawning Pi\-P task. 

The before and after hook functions should have the function prototype as shown below; 
\begin{DoxyCode}
\textcolor{keywordtype}{int} hook\_func( \textcolor{keywordtype}{void} *hookarg )
\end{DoxyCode}

\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em hook} & Pointer to the {\ttfamily pip\-\_\-spawn\-\_\-hook\-\_\-t} structure in which the invocation hook information will be set \\
\hline
\mbox{\tt in}  & {\em before} & Just before the executing of the spawned Pi\-P task, this function is called so that file descriptors inherited from the Pi\-P root, for example, can deal with. This is only effective with the Pi\-P process mode. This function is called with the argument {\itshape hookarg} described below. \\
\hline
\mbox{\tt in}  & {\em after} & This function is called when the Pi\-P task terminates for the cleanup purpose. This function is called with the argument {\itshape hookarg} described below. \\
\hline
\mbox{\tt in}  & {\em hookarg} & The argument for the {\itshape before} and {\itshape after} function call.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Note that the file descriptors and signal handlers are shared between Pi\-P root and Pi\-P tasks in the pthread execution mode.
\end{DoxyNote}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 
\end{DoxySeeAlso}
\hypertarget{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{\index{Spawning Pi\-P task@{Spawning Pi\-P task}!pip\-\_\-task\-\_\-spawn@{pip\-\_\-task\-\_\-spawn}}
\index{pip\-\_\-task\-\_\-spawn@{pip\-\_\-task\-\_\-spawn}!Spawning PiP task@{Spawning Pi\-P task}}
\subsubsection[{pip\-\_\-task\-\_\-spawn}]{\setlength{\rightskip}{0pt plus 5cm}int pip\-\_\-task\-\_\-spawn (
\begin{DoxyParamCaption}
\item[{pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$}]{progp, }
\item[{uint32\-\_\-t}]{coreno, }
\item[{uint32\-\_\-t}]{opts, }
\item[{int $\ast$}]{pipidp, }
\item[{pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$}]{hookp}
\end{DoxyParamCaption}
)}}\label{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}
\begin{DoxyParagraph}{Name}
pip\-\_\-task\-\_\-spawn\index{pip_task_spawn@{pip\-\_\-task\-\_\-spawn}}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Synopsis}
\#include $<$\hyperlink{pip_8h_source}{pip.\-h}$>$ \par
int pip\-\_\-task\-\_\-spawn( pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, uint32\-\_\-t coreno, uint32\-\_\-t opts, int $\ast$pipidp, pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$hookp );
\end{DoxyParagraph}
\begin{DoxyParagraph}{Description}
This function spawns a Pi\-P task specified by {\ttfamily progp}. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
In the process execution mode, the file descriptors having the {\ttfamily F\-D\-\_\-\-C\-L\-O\-E\-X\-E\-C} flag is closed and will not be passed to the spawned Pi\-P task. This simulated close-\/on-\/exec will not take place in the pthread execution mode.
\end{DoxyParagraph}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em progp} & {\bfseries pip\-\_\-spawn\-\_\-program\-\_\-t} \\
\hline
\mbox{\tt in}  & {\em coreno} & C\-P\-U core number for the Pi\-P task to be bound to. By default, {\ttfamily coreno} is set to zero, for example, then the calling task will be bound to the 'first' core available. This is in mind that the available core numbers are not contiguous. To specify an absolute core number, {\ttfamily coreno} must be bitwise-\/\-O\-Red with {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-A\-B\-S}. If {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-A\-S\-I\-S} is specified, then the core binding will not take place. \\
\hline
\mbox{\tt in}  & {\em opts} & option flags \\
\hline
\mbox{\tt in,out}  & {\em pipidp} & Specify Pi\-P I\-D of the spawned Pi\-P task. If {\ttfamily P\-I\-P\-\_\-\-P\-I\-P\-I\-D\-\_\-\-A\-N\-Y} is specified, then the Pi\-P I\-D of the spawned Pi\-P task is up to the Pi\-P library and the assigned Pi\-P I\-D will be returned. \\
\hline
\mbox{\tt in}  & {\em hookp} & Hook information to be invoked before and after the program invokation.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero is returned if this function succeeds. On error, an error number is returned. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em E\-P\-E\-R\-M} & Pi\-P library is not yet initialized \\
\hline
{\em E\-P\-E\-R\-M} & Pi\-P task tries to spawn child task \\
\hline
{\em E\-I\-N\-V\-A\-L} & {\ttfamily progp} is {\ttfamily N\-U\-L\-L} \\
\hline
{\em E\-I\-N\-V\-A\-L} & {\ttfamily opts} is invalid and/or unacceptable \\
\hline
{\em E\-I\-N\-V\-A\-L} & the value off {\ttfamily pipidp} is invalid \\
\hline
{\em E\-I\-N\-V\-A\-L} & the coreno is larger than or equal to {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-C\-O\-R\-E\-N\-O\-\_\-\-M\-A\-X} \\
\hline
{\em E\-B\-U\-S\-Y} & specified Pi\-P I\-D is alredy occupied \\
\hline
{\em E\-N\-O\-M\-E\-M} & not enough memory \\
\hline
{\em E\-N\-X\-I\-O} & {\ttfamily dlmopen} failss\\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{Bugs}
In theory, there is no reason to restrict for a Pi\-P task to spawn another Pi\-P task. However, the current glibc implementation does not allow to do so. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
If the root process is multithreaded, only the main thread can call this function.
\end{DoxyParagraph}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}{pip\-\_\-spawn\-\_\-from\-\_\-main} 

\hyperlink{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}{pip\-\_\-spawn\-\_\-from\-\_\-func} 

\hyperlink{group__PiP-1-spawn_ga1c3f1d9e029f68dbcfb7d78b7dfa1533}{pip\-\_\-spawn\-\_\-hook} 

\hyperlink{group__PiP-1-spawn_ga4698d85283b03f0443fb0991e1119d35}{pip\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_ga8b31bc23b6e165ae50d3bdea655539c5}{pip\-\_\-blt\-\_\-spawn} 
\end{DoxySeeAlso}
\hypertarget{group__PiP-1-spawn_ga4698d85283b03f0443fb0991e1119d35}{\index{Spawning Pi\-P task@{Spawning Pi\-P task}!pip\-\_\-spawn@{pip\-\_\-spawn}}
\index{pip\-\_\-spawn@{pip\-\_\-spawn}!Spawning PiP task@{Spawning Pi\-P task}}
\subsubsection[{pip\-\_\-spawn}]{\setlength{\rightskip}{0pt plus 5cm}int pip\-\_\-spawn (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{char $\ast$$\ast$}]{argv, }
\item[{char $\ast$$\ast$}]{envv, }
\item[{uint32\-\_\-t}]{coreno, }
\item[{int $\ast$}]{pipidp, }
\item[{pip\-\_\-spawnhook\-\_\-t}]{before, }
\item[{pip\-\_\-spawnhook\-\_\-t}]{after, }
\item[{void $\ast$}]{hookarg}
\end{DoxyParamCaption}
)}}\label{group__PiP-1-spawn_ga4698d85283b03f0443fb0991e1119d35}
\begin{DoxyParagraph}{Name}
pip\-\_\-spawn\index{pip_spawn@{pip\-\_\-spawn}}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Synopsis}
\#include $<$\hyperlink{pip_8h_source}{pip.\-h}$>$ \par
int pip\-\_\-spawn( char $\ast$filename, char $\ast$$\ast$argv, char $\ast$$\ast$envv, uint32\-\_\-t coreno, int $\ast$pipidp, pip\-\_\-spawnhook\-\_\-t before, pip\-\_\-spawnhook\-\_\-t after, void $\ast$hookarg);
\end{DoxyParagraph}
\begin{DoxyParagraph}{Description}
This function spawns a Pi\-P task. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
In the process execution mode, the file descriptors having the {\ttfamily F\-D\-\_\-\-C\-L\-O\-E\-X\-E\-C} flag is closed and will not be passed to the spawned Pi\-P task. This simulated close-\/on-\/exec will not take place in the pthread execution mode.
\end{DoxyParagraph}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em filename} & The executable to run as a Pi\-P task \\
\hline
\mbox{\tt in}  & {\em argv} & Argument(s) for the spawned Pi\-P task \\
\hline
\mbox{\tt in}  & {\em envv} & Environment variables for the spawned Pi\-P task \\
\hline
\mbox{\tt in}  & {\em coreno} & C\-P\-U core number for the Pi\-P task to be bound to. By default, {\ttfamily coreno} is set to zero, for example, then the calling task will be bound to the first core available. This is in mind that the available core numbers are not contiguous. To specify an absolute core number, {\ttfamily coreno} must be bitwise-\/\-O\-Red with {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-A\-B\-S}. If {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-A\-S\-I\-S} is specified, then the core binding will not take place. \\
\hline
\mbox{\tt in,out}  & {\em pipidp} & Specify Pi\-P I\-D of the spawned Pi\-P task. If {\ttfamily P\-I\-P\-\_\-\-P\-I\-P\-I\-D\-\_\-\-A\-N\-Y} is specified, then the Pi\-P I\-D of the spawned Pi\-P task is up to the Pi\-P library and the assigned Pi\-P I\-D will be returned. \\
\hline
\mbox{\tt in}  & {\em before} & Just before the executing of the spawned Pi\-P task, this function is called so that file descriptors inherited from the Pi\-P root, for example, can deal with. This is only effective with the Pi\-P process mode. This function is called with the argument {\itshape hookarg} described below. \\
\hline
\mbox{\tt in}  & {\em after} & This function is called when the Pi\-P task terminates for the cleanup purpose. This function is called with the argument {\itshape hookarg} described below. \\
\hline
\mbox{\tt in}  & {\em hookarg} & The argument for the {\itshape before} and {\itshape after} function call.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 on success. Return an error code on error. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em E\-P\-E\-R\-M} & Pi\-P library is not yet initialized \\
\hline
{\em E\-P\-E\-R\-M} & Pi\-P task tries to spawn child task \\
\hline
{\em E\-I\-N\-V\-A\-L} & {\ttfamily progp} is {\ttfamily N\-U\-L\-L} \\
\hline
{\em E\-I\-N\-V\-A\-L} & {\ttfamily opts} is invalid and/or unacceptable \\
\hline
{\em E\-I\-N\-V\-A\-L} & the value off {\ttfamily pipidp} is invalid \\
\hline
{\em E\-I\-N\-V\-A\-L} & the coreno is larger than or equal to {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-C\-O\-R\-E\-N\-O\-\_\-\-M\-A\-X} \\
\hline
{\em E\-B\-U\-S\-Y} & specified Pi\-P I\-D is alredy occupied \\
\hline
{\em E\-N\-O\-M\-E\-M} & not enough memory \\
\hline
{\em E\-N\-X\-I\-O} & {\ttfamily dlmopen} failss\\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{Bugs}
In theory, there is no reason to restrict for a Pi\-P task to spawn another Pi\-P task. However, the current glibc implementation does not allow to do so. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
If the root process is multithreaded, only the main thread can call this function.
\end{DoxyParagraph}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}{pip\-\_\-spawn\-\_\-from\-\_\-main} 

\hyperlink{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}{pip\-\_\-spawn\-\_\-from\-\_\-func} 

\hyperlink{group__PiP-1-spawn_ga1c3f1d9e029f68dbcfb7d78b7dfa1533}{pip\-\_\-spawn\-\_\-hook} 

\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_ga8b31bc23b6e165ae50d3bdea655539c5}{pip\-\_\-blt\-\_\-spawn} 
\end{DoxySeeAlso}
\hypertarget{group__PiP-1-spawn_ga8b31bc23b6e165ae50d3bdea655539c5}{\index{Spawning Pi\-P task@{Spawning Pi\-P task}!pip\-\_\-blt\-\_\-spawn@{pip\-\_\-blt\-\_\-spawn}}
\index{pip\-\_\-blt\-\_\-spawn@{pip\-\_\-blt\-\_\-spawn}!Spawning PiP task@{Spawning Pi\-P task}}
\subsubsection[{pip\-\_\-blt\-\_\-spawn}]{\setlength{\rightskip}{0pt plus 5cm}int pip\-\_\-blt\-\_\-spawn (
\begin{DoxyParamCaption}
\item[{pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$}]{progp, }
\item[{uint32\-\_\-t}]{coreno, }
\item[{uint32\-\_\-t}]{opts, }
\item[{int $\ast$}]{pipidp, }
\item[{pip\-\_\-task\-\_\-t $\ast$$\ast$}]{bltp, }
\item[{pip\-\_\-task\-\_\-queue\-\_\-t $\ast$}]{queue, }
\item[{pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$}]{hookp}
\end{DoxyParamCaption}
)}}\label{group__PiP-1-spawn_ga8b31bc23b6e165ae50d3bdea655539c5}
\begin{DoxyParagraph}{Name}
pip\-\_\-blt\-\_\-spawn\index{pip_blt_spawn@{pip\-\_\-blt\-\_\-spawn}}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Synopsis}
\#include $<$\hyperlink{pip_8h_source}{pip.\-h}$>$ \par
int pip\-\_\-blt\-\_\-spawn( pip\-\_\-spawn\-\_\-program\-\_\-t $\ast$progp, uint32\-\_\-t coreno, uint32\-\_\-t opts, int $\ast$pipidp, pip\-\_\-task\-\_\-t $\ast$$\ast$bltp, pip\-\_\-task\-\_\-queue\-\_\-t $\ast$queue, pip\-\_\-spawn\-\_\-hook\-\_\-t $\ast$hookp );
\end{DoxyParagraph}
\begin{DoxyParagraph}{Description}
This function spawns a B\-L\-T (Pi\-P task) specified by {\ttfamily progp}. The created annd returned B\-L\-T is another form of a Pi\-P task. It is an opaque object, essentially a double-\/linked list. Thus created B\-L\-T can be enqueued or dequeued to/from a {\ttfamily pip\-\_\-task\-\_\-queue\-\_\-t}. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
In the process execution mode, the file descriptors having the {\ttfamily F\-D\-\_\-\-C\-L\-O\-E\-X\-E\-C} flag is closed and will not be passed to the spawned Pi\-P task. This simulated close-\/on-\/exec will not take place in the pthread execution mode.
\end{DoxyParagraph}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em progp} & {\bfseries pip\-\_\-spawn\-\_\-program\-\_\-t} \\
\hline
\mbox{\tt in}  & {\em coreno} & C\-P\-U core number for the Pi\-P task to be bound to. By default, {\ttfamily coreno} is set to zero, for example, then the calling task will be bound to the first core available. This is in mind that the available core numbers are not contiguous. To specify an absolute core number, {\ttfamily coreno} must be bitwise-\/\-O\-Red with {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-A\-B\-S}. If {\ttfamily P\-I\-P\-\_\-\-C\-P\-U\-C\-O\-R\-E\-\_\-\-A\-S\-I\-S} is specified, then the core binding will not take place. \\
\hline
\mbox{\tt in}  & {\em opts} & option flags. If {\ttfamily P\-I\-P\-\_\-\-T\-A\-S\-K\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E} is set, the created B\-L\-T is suspended and enqueued to the specified {\ttfamily queue}. Otherwise the B\-L\-T will schedules the B\-L\-Ts in {\ttfamily queue}. \\
\hline
\mbox{\tt in,out}  & {\em pipidp} & Specify Pi\-P I\-D of the spawned Pi\-P task. If {\ttfamily P\-I\-P\-\_\-\-P\-I\-P\-I\-D\-\_\-\-A\-N\-Y} is specified, then the Pi\-P I\-D of the spawned Pi\-P task is up to the Pi\-P library and the assigned Pi\-P I\-D will be returned. The Pi\-P execution mode can also be specified (see below). \\
\hline
\mbox{\tt in,out}  & {\em bltp} & returns created B\-L\-T \\
\hline
\mbox{\tt in}  & {\em queue} & Pi\-P task queue. See the above {\ttfamily opts} description. \\
\hline
\mbox{\tt in}  & {\em hookp} & Hook information to be invoked before and after the program invokation.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 on success. Return an error code on error. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em E\-P\-E\-R\-M} & Pi\-P library is not yet initialized \\
\hline
{\em E\-P\-E\-R\-M} & Pi\-P task tries to spawn child task \\
\hline
{\em E\-I\-N\-V\-A\-L} & {\ttfamily progp} is {\ttfamily N\-U\-L\-L} \\
\hline
{\em E\-I\-N\-V\-A\-L} & {\ttfamily opts} is invalid and/or unacceptable \\
\hline
{\em E\-I\-N\-V\-A\-L} & the value off {\ttfamily pipidp} is invalid \\
\hline
{\em E\-B\-U\-S\-Y} & specified Pi\-P I\-D is alredy occupied \\
\hline
{\em E\-N\-O\-M\-E\-M} & not enough memory \\
\hline
{\em E\-N\-X\-I\-O} & {\ttfamily dlmopen} failss\\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{Execution mode option}
Users may explicitly specify the Pi\-P execution mode. This execution mode can be categorized in two; process mode and thread mode. In the process execution mode, each Pi\-P task may have its own file descriptors, signal handlers, and so on, just like a process. Contrastingly, in the pthread executionn mode, file descriptors and signal handlers are shared among Pi\-P root and Pi\-P tasks while maintaining the privatized variables. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
To spawn a Pi\-P task in the process mode, the Pi\-P library modifies the {\bfseries clone()} flag so that the created Pi\-P task can exhibit the alomost same way with that of normal Linux process. There are three ways implmented; using L\-D\-\_\-\-P\-R\-E\-L\-O\-A\-D, modifying G\-L\-I\-B\-C, and modifying G\-I\-O\-T entry of the {\bfseries clone()} systemcall. One of the option flag values; {\bfseries P\-I\-P\-\_\-\-M\-O\-D\-E\-\_\-\-P\-T\-H\-R\-E\-A\-D}, {\bfseries P\-I\-P\-\_\-\-M\-O\-D\-E\-\_\-\-P\-R\-O\-C\-E\-S\-S}, {\bfseries P\-I\-P\-\_\-\-M\-O\-D\-E\-\_\-\-P\-R\-O\-C\-E\-S\-S\-\_\-\-P\-R\-E\-L\-O\-A\-D}, {\bfseries P\-I\-P\-\_\-\-M\-O\-D\-E\-\_\-\-P\-R\-O\-C\-E\-S\-S\-\_\-\-P\-I\-P\-C\-L\-O\-N\-E}, or b P\-I\-P\-\_\-\-M\-O\-D\-E\-\_\-\-P\-R\-O\-C\-E\-S\-S\-\_\-\-G\-O\-T can be specified as the option flag. Or, users may specify the execution mode by the P\-I\-P\-\_\-\-M\-O\-D\-E environment described below.
\end{DoxyParagraph}
\begin{DoxyNote}{Note}
In theory, there is no reason to restrict for a Pi\-P task to spawn another Pi\-P task. However, the current implementation fails to do so. If the root process is multithreaded, only the main thread can call this function.
\end{DoxyNote}
\begin{DoxyParagraph}{Environment}
\begin{DoxyItemize}
\item {\bfseries P\-I\-P\-\_\-\-M\-O\-D\-E} Specifying the Pi\-P execution mode. The value can be one of; 'process', 'process\-:preload', 'process\-:got' and 'thread' (or 'pthread'). \item {\bfseries P\-I\-P\-\_\-\-S\-T\-A\-C\-K\-S\-Z} Sepcifying the stack size (in bytes). The {\bfseries K\-M\-P\-\_\-\-S\-T\-A\-C\-K\-S\-I\-Z\-E} and {\bfseries O\-M\-P\-\_\-\-S\-T\-A\-C\-K\-S\-I\-Z\-E} can also be specified. The 't', 'g', 'm', 'k' and 'b' posfix character can be used. \item {\bfseries P\-I\-P\-\_\-\-S\-T\-O\-P\-\_\-\-O\-N\-\_\-\-S\-T\-A\-R\-T} Specifying the P\-I\-P I\-D to stop on start Pi\-P task program to debug from the beginning. If the before hook is specified, then the Pi\-P task will be stopped just before calling the before hook. \item {\bfseries P\-I\-P\-\_\-\-S\-T\-A\-C\-K\-S\-Z} Sepcifying the stack size (in bytes). The {\bfseries K\-M\-P\-\_\-\-S\-T\-A\-C\-K\-S\-I\-Z\-E} and {\bfseries O\-M\-P\-\_\-\-S\-T\-A\-C\-K\-S\-I\-Z\-E} can also be specified. The 't', 'g', 'm', 'k' and 'b' posfix character can be used.\end{DoxyItemize}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Bugs}
In theory, there is no reason to restrict for a Pi\-P task to spawn another Pi\-P task. However, the current glibc implementation does not allow to do so. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
If the root process is multithreaded, only the main thread can call this function.
\end{DoxyParagraph}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_gad7708867e5370ae0a4ae71b16f446f16}{pip\-\_\-spawn\-\_\-from\-\_\-main} 

\hyperlink{group__PiP-1-spawn_ga71d2d053e9c7153adc167e2cf1adf12e}{pip\-\_\-spawn\-\_\-from\-\_\-func} 

\hyperlink{group__PiP-1-spawn_ga1c3f1d9e029f68dbcfb7d78b7dfa1533}{pip\-\_\-spawn\-\_\-hook} 

\hyperlink{group__PiP-1-spawn_gaf1fcc4cb85ec3eda734afe2beb0c6a36}{pip\-\_\-task\-\_\-spawn} 

\hyperlink{group__PiP-1-spawn_ga4698d85283b03f0443fb0991e1119d35}{pip\-\_\-spawn} 
\end{DoxySeeAlso}
