CPPFLAGS = -I$(srcdir)/.. -I$(PIPINCDIR)
CFLAGS += $(PIEFLAG) -pthread
PIPLDFLAGS += $(PIPLDLIB) -pthread

DEPINCS = ../test.h $(PIPINCDIR)/pip.h $(PIPINCDIR)/pip_types.h \
	$(PIPINCDIR)/pip_ulp.h $(PIPINCDIR)/pip_internal.h \
	$(PIPINCDIR)/pip_machdep.h $(PIPINCDIR)/pip_debug.h

%: %.c $(SRCS) $(DEPINCS) $(PIPLIB) Makefile
	$(CC) $(CPPFLAGS) $(CFLAGS) $(PIPLDFLAGS) $< -o $@

%: %.cxx $(SRCS) $(DEPINCS) $(PIPLIB) Makefile
	$(CXX) $(CPPFLAGS) $(CFLAGS) $(PIPLDFLAGS) -pie $< -o $@

%: %.f $(SRCS) $(DEPINCS) $(PIPLIB) Makefile
	$(FC) $(CPPFLAGS) $(FFLAGS) $(PIPLDFLAGS) -fPIE $< -o $@
